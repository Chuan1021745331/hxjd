<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <!-- Meta, title, CSS, favicons, etc. -->
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"/>

    <title>华夏九鼎军民融合科学技术研究院|</title>
    <script type="text/javascript" src="${CPATH}/plus/jquery-1.12.4.min.js"></script>
    <link rel="stylesheet" type="text/css" media="all" href="${CPATH}/frame/layui/css/layui.css">
    <link rel="stylesheet" type="text/css" media="all" href="${CPATH}/css/base.css">
    <link rel="stylesheet" type="text/css" media="all" href="${CPATH}/css/main.css">
    <script type="text/javascript">
        var bpath = "${BPATH}";
        var cpath = "${CPATH}";
        var apath = "${APATH}";
    </script>
    	<style type="text/css">  
		 img{
		 	width:100% !important;
		 	height:100% !important;
		 	}

	</style>  
</head>
<body style="overflow:auto">
<div id="mobile" >
	<div id="tag" style="margin-left: 1%;margin-top:1%;">
		<button class="layui-btn layui-btn-sm layui-btn-radius all" style="background-color: #3F51B5;">全部</button>
		<#if newsType??>
			<#list newsType as bean>
				<button class="layui-btn layui-btn-sm layui-btn-radius tag" style="background-color: #3F51B5;">${bean.name!}</button>
			</#list>
		</#if>
        <button class="layui-btn layui-btn-sm layui-btn-radius tbmrepair-tag" style="background-color: #3F51B5;">维保记录</button>

	</div>
	<div id="newsCard" class="layui-row" style="overflow-x:hidden;">
	   <#if news??>
	   		<#list news as bean>
	   			<#if bean_index lt 9 >
		   			<div class="layui-col-xs12 layui-col-sm12 layui-col-md12 layui-col-space10 item ${bean.name}" style="margin: 0px;white-space:normal;">
				    	<div  class="layui-col-xs12 layui-col-sm12 layui-col-md12 colAll">
				   		 	<div class="id" style="display:none">${bean.id!}</div>
				   		 	<div class="layui-col-xs12 layui-col-sm12 layui-col-md12 colHeader" style="height:20%">【${bean.name!}】${bean.title!}</div>
				    		<div class="layui-col-xs12 layui-col-sm12 layui-col-md12" style="word-wrap:break-word;">${bean.con!}</div>
				    		<div >${bean.postMan!} 发布于 ${bean.postTime!}</div>
				    		<hr class="layui-bg-blue">
				    	</div>	    	
				    </div>
				</#if>	    
	   		</#list>
	   </#if> 	    
	</div>
</div>


</body>
<script type="text/javascript">
	$(".colHeader").unbind('click').click(function(){
		var id = $(this).prev().text();
		window.location = "${BPATH}/news/getNewsById?id="+id;
	}),
	
	$(".tag").unbind('click').click(function(){
		if($(this).hasClass("selected")){
			$(this).removeClass("selected");
			$(this).css("background-color","#3F51B5");
			$(".item").show();
		}else{
			$(this).addClass("selected");
			$(this).css("background-color","#3CB371");
			$(this).siblings().css("background-color","#3F51B5");
			$(this).siblings().removeClass("selected");
			$(".item").hide();
			//console.log($(this).attr("id"));
			$("."+$(this).attr("id")).show();
		}
	})
	$(".all").unbind('click').click(function(){
		$(".tag").removeClass("selected");
		$(".tag").css("background-color","#3F51B5");
		$(".item").show();
	})
	
	var page = 1;
	$(window).scroll(function(){
		//scrollTop() 方法返回或设置匹配元素的滚动条的垂直位置
		var scrollTop = $(this).scrollTop();  
	    //整个文档的高度
	    var scrollHeight = $(document).height(); 
	    //当前可见区域的大小
	    var windowHeight = $(this).height(); 
	    //滚动到底部
	    if(scrollTop + windowHeight == scrollHeight){
	        page += 1;
	        showMore(page);
	    }
	})
	
	function showMore(page){
		//alert("加载");
		<#if news??>
				<#list news as bean>
	   			var index = ${bean_index}	;
	   			
				//console.log(index);
			    if(index > (page-1)*10  && index < page*10-1){
					 $("#newsCard").append(
						'<div class="layui-col-xs12 layui-col-sm12 layui-col-md12 layui-col-space10 item ${bean.type}" style="margin: 0px;white-space:normal;"><div  class="layui-col-xs12 layui-col-sm12 layui-col-md12 colAll"><div class="id" style="display:none">${bean.id!}</div><div class="layui-col-xs12 layui-col-sm12 layui-col-md12 colHeader" style="height:20%">【${bean.name!}】${bean.title!}</div><div class="layui-col-xs12 layui-col-sm12 layui-col-md12" style="word-wrap:break-word;">            </div><div >${bean.postMan!} 发布于 ${bean.postTime!}</div><hr class="layui-bg-blue"></div>	</div>'						
					); 					
				}					 
				</#list> 
			</#if>
	}

  	$(".tbmrepair-tag").unbind('click').click(function(){
	});
	
</script>
</html>